<header class="course-page">
  <div class="container">
    <div class="title">
      <h2><%= @course.title %></h2>
      <h6><%= @course.school %> | <%= @course.term %></h6>
    </div>
    <div class="stat-display">
      <div class="stat-display__stat"><%= t("metrics.articles_created_count", count: content_tag(:h3, number_to_human(@course.revisions.joins(:article).where(articles: {namespace: 0}).where(new_article: true).count))).html_safe %><small><%= t("metrics.articles_created") %></small></div>
      <div class="stat-display__stat"><%= t("metrics.articles_edited_count", count: content_tag(:h3, number_to_human(@course.article_count))).html_safe %><small><%= t("metrics.articles_edited") %></small></div>
      <div class="stat-display__stat"><%= t("metrics.edit_count", count: content_tag(:h3, number_to_human(@course.revisions.count))).html_safe %><small><%= t("metrics.edit_count_description") %></small></div>
      <div class="stat-display__stat popover-trigger">
        <%= t("course.students_count", count: content_tag(:h3, @course.user_count)).html_safe %>
        <div class="popover">
          <%= t("user.training_complete_count", count: content_tag(:h4, @course.users.student.where(trained: true).count)).html_safe %>
          <p><%= t("user.training_complete", count: @course.users.student.where(trained: true).count) %></p>
        </div>
      </div>
      <div class="stat-display__stat"><%= t("metrics.char_added_count", count: content_tag(:h3, number_to_human(@course.character_sum))).html_safe %><small><%= t("metrics.char_added") %></small></div>
      <div class="stat-display__stat"><%= t("metrics.view_count", count: content_tag(:h3, number_to_human(@course.view_sum))).html_safe %><small><%= t("metrics.view_count_description") %></small></div>
    </div>
    <div class="details">
      <div class="details__detail">
        <h6><%= t("course.instructor", count: @course.users.instructor.count) %></h6>
        <p><%= user_links(@course.users.instructor, "inline") %></p>
      </div>
      <% if !@volunteers.nil? && @volunteers.count > 0 %>
      <div class="details__detail">
        <h6><%= t("course.volunteer", count: @volunteers.count) %></h6>
        <p><%= user_links(@volunteers, "inline") %></p>
      </div>
      <% end %>
      <% if @course.users.wiki_ed_staff.count > 0 %>
      <div class="details__detail">
        <h6><%= t("course.wiki_staff") %></h6>
        <p><%= user_links(@course.users.wiki_ed_staff, "inline") %></p>
      </div>
      <% end %>
      <div class="details__detail">
        <h6><%= t("course.duration") %></h6>
        <p><%= @course.start %> &mdash; <%= @course.end %></p>
      </div>
      <div class="details__detail">
        <h6><%= t("course.view_wiki") %></h6>
        <p><a class="inline" href="https://en.wikipedia.org/wiki/Education_Program:<%= @course.slug %>"><%= @course.title %></a></p>
      </div>
    </div>
  </div>
</header>
