(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
$(function() {
  var articleList, courseList, revisionList, userList;
  courseList = new List('courses', {
    valueNames: ['title', 'characters', 'views', 'students']
  });
  userList = new List('users', {
    valueNames: ['name', 'training', 'characters-ms', 'characters-us', 'edits']
  });
  articleList = new List('articles', {
    valueNames: ['rating_num', 'title', 'characters', 'views']
  });
  revisionList = new List('revisions', {
    valueNames: ['title', 'date', 'characters', 'views']
  });
  $('select.cohorts').change(function(e) {
    var cohort;
    cohort = $('select.cohorts option:selected').val();
    return window.location = "/courses?cohort=" + encodeURIComponent(cohort);
  });
  $('select.sorts').change(function(e) {
    var list;
    list = (function() {
      switch ($(this).attr('rel')) {
        case "courses":
          return courseList;
        case "users":
          return userList;
        case "articles":
          return articleList;
        case "revisions":
          return revisionList;
      }
    }).call(this);
    return list.sort($(this).val(), {
      order: $(this).children('option:selected').attr('rel')
    });
  });
  return $('a.manual_update').click(function(e) {
    e.preventDefault();
    console.log('Updating course...');
    $(e.target).parent().text('Updating course data. This page will reload when new data is available.');
    return $.get($(e.target).attr('href'), function(data) {
      return location.reload();
    });
  });
});

$.fn.extend({
  toggleHeight: function() {
    return this.each(function() {
      var height;
      height = '0px';
      if ($(this).css('height') === void 0 || $(this).css('height') === '0px') {
        height = $(this).getContentHeight();
      }
      return $(this).css('height', height);
    });
  },
  getContentHeight: function() {
    var elem, height;
    elem = $(this).clone().css({
      "height": "auto",
      "display": "block"
    }).appendTo($(this).parent());
    height = elem.css("height");
    elem.remove();
    return height;
  }
});


},{}],2:[function(require,module,exports){
$(function() {
  require("./course.coffee");
  return require("./user.coffee");
});


},{"./course.coffee":1,"./user.coffee":3}],3:[function(require,module,exports){
$(function() {
  $('.drawer_trigger:not(.disabled)').click(function(e) {
    var drawer;
    drawer = $(e.target).parents('.row').children('.drawer');
    if ($(e.target).is('a')) {
      return;
    }
    $('.drawer').not(drawer).css('height', '0px');
    $('.row.open').not($(e.target).parents('.row')).removeClass('open');
    if (drawer.find('li').length === 0) {
      return $.ajax({
        url: drawer.attr("rel")
      }).done(function(data) {
        drawer.find('ul.list').append(data.html);
        drawer.toggleHeight();
        $(e.target).parents('.row').toggleClass('open');
        return setTimeout(function() {
          return $('html').velocity("scroll", {
            offset: $(e.target).parents('.row').offset().top - 80,
            duration: 400,
            easing: "easeInOutQuad"
          });
        }, 200);
      });
    } else {
      drawer.toggleHeight();
      $(e.target).parents('.row').toggleClass('open');
      return setTimeout(function() {
        console.log($(e.target).parents('.row').offset().top - 80);
        return $('html').velocity("scroll", {
          offset: $(e.target).parents('.row').offset().top - 80,
          duration: 400,
          easing: "easeInOutQuad"
        });
      }, 200);
    }
  });
  return $('.drawer .view-all a').click(function(e) {
    var that;
    e.preventDefault();
    that = this;
    return $.ajax({
      url: $(this).attr("href")
    }).done(function(data) {
      var drawer;
      drawer = $(that).parents('.drawer');
      drawer.find('ul.list').append(data.html);
      $(that).parents('.view-all').remove();
      return drawer.css('height', drawer.getContentHeight());
    });
  });
});


},{}]},{},[2])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9uYXRlYmFpbGV5L0RldmVsb3BtZW50L1dpa2lFZHVEYXNoYm9hcmQvbm9kZV9tb2R1bGVzL2d1bHAtYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwiL1VzZXJzL25hdGViYWlsZXkvRGV2ZWxvcG1lbnQvV2lraUVkdURhc2hib2FyZC9hcHAvYXNzZXRzL2phdmFzY3JpcHRzL2NvdXJzZS5jb2ZmZWUiLCIvVXNlcnMvbmF0ZWJhaWxleS9EZXZlbG9wbWVudC9XaWtpRWR1RGFzaGJvYXJkL2FwcC9hc3NldHMvamF2YXNjcmlwdHMvbWFpbi5jb2ZmZWUiLCIvVXNlcnMvbmF0ZWJhaWxleS9EZXZlbG9wbWVudC9XaWtpRWR1RGFzaGJvYXJkL2FwcC9hc3NldHMvamF2YXNjcmlwdHMvdXNlci5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQSxDQUFBLENBQUUsU0FBQSxHQUFBO0FBRUEsTUFBQSwrQ0FBQTtBQUFBLEVBQUEsVUFBQSxHQUFpQixJQUFBLElBQUEsQ0FBSyxTQUFMLEVBQWdCO0FBQUEsSUFBQyxVQUFBLEVBQVksQ0FBQyxPQUFELEVBQVMsWUFBVCxFQUFzQixPQUF0QixFQUE4QixVQUE5QixDQUFiO0dBQWhCLENBQWpCLENBQUE7QUFBQSxFQUdBLFFBQUEsR0FBZSxJQUFBLElBQUEsQ0FBSyxPQUFMLEVBQWM7QUFBQSxJQUFDLFVBQUEsRUFBWSxDQUFDLE1BQUQsRUFBUSxVQUFSLEVBQW1CLGVBQW5CLEVBQW9DLGVBQXBDLEVBQXFELE9BQXJELENBQWI7R0FBZCxDQUhmLENBQUE7QUFBQSxFQU1BLFdBQUEsR0FBa0IsSUFBQSxJQUFBLENBQUssVUFBTCxFQUFpQjtBQUFBLElBQUMsVUFBQSxFQUFZLENBQUMsWUFBRCxFQUFlLE9BQWYsRUFBdUIsWUFBdkIsRUFBb0MsT0FBcEMsQ0FBYjtHQUFqQixDQU5sQixDQUFBO0FBQUEsRUFTQSxZQUFBLEdBQW1CLElBQUEsSUFBQSxDQUFLLFdBQUwsRUFBa0I7QUFBQSxJQUFDLFVBQUEsRUFBWSxDQUFDLE9BQUQsRUFBVSxNQUFWLEVBQWtCLFlBQWxCLEVBQWdDLE9BQWhDLENBQWI7R0FBbEIsQ0FUbkIsQ0FBQTtBQUFBLEVBV0EsQ0FBQSxDQUFFLGdCQUFGLENBQW1CLENBQUMsTUFBcEIsQ0FBMkIsU0FBQyxDQUFELEdBQUE7QUFDekIsUUFBQSxNQUFBO0FBQUEsSUFBQSxNQUFBLEdBQVMsQ0FBQSxDQUFFLGdDQUFGLENBQW1DLENBQUMsR0FBcEMsQ0FBQSxDQUFULENBQUE7V0FDQSxNQUFNLENBQUMsUUFBUCxHQUFrQixrQkFBQSxHQUFxQixrQkFBQSxDQUFtQixNQUFuQixFQUZkO0VBQUEsQ0FBM0IsQ0FYQSxDQUFBO0FBQUEsRUFlQSxDQUFBLENBQUUsY0FBRixDQUFpQixDQUFDLE1BQWxCLENBQXlCLFNBQUMsQ0FBRCxHQUFBO0FBQ3ZCLFFBQUEsSUFBQTtBQUFBLElBQUEsSUFBQTtBQUFPLGNBQU8sQ0FBQSxDQUFFLElBQUYsQ0FBTyxDQUFDLElBQVIsQ0FBYSxLQUFiLENBQVA7QUFBQSxhQUNBLFNBREE7aUJBQ2UsV0FEZjtBQUFBLGFBRUEsT0FGQTtpQkFFYSxTQUZiO0FBQUEsYUFHQSxVQUhBO2lCQUdnQixZQUhoQjtBQUFBLGFBSUEsV0FKQTtpQkFJaUIsYUFKakI7QUFBQTtpQkFBUCxDQUFBO1dBS0EsSUFBSSxDQUFDLElBQUwsQ0FBVSxDQUFBLENBQUUsSUFBRixDQUFPLENBQUMsR0FBUixDQUFBLENBQVYsRUFBeUI7QUFBQSxNQUFFLEtBQUEsRUFBTyxDQUFBLENBQUUsSUFBRixDQUFPLENBQUMsUUFBUixDQUFpQixpQkFBakIsQ0FBbUMsQ0FBQyxJQUFwQyxDQUF5QyxLQUF6QyxDQUFUO0tBQXpCLEVBTnVCO0VBQUEsQ0FBekIsQ0FmQSxDQUFBO1NBdUJBLENBQUEsQ0FBRSxpQkFBRixDQUFvQixDQUFDLEtBQXJCLENBQTJCLFNBQUMsQ0FBRCxHQUFBO0FBQ3pCLElBQUEsQ0FBQyxDQUFDLGNBQUYsQ0FBQSxDQUFBLENBQUE7QUFBQSxJQUNBLE9BQU8sQ0FBQyxHQUFSLENBQVksb0JBQVosQ0FEQSxDQUFBO0FBQUEsSUFFQSxDQUFBLENBQUUsQ0FBQyxDQUFDLE1BQUosQ0FBVyxDQUFDLE1BQVosQ0FBQSxDQUFvQixDQUFDLElBQXJCLENBQTBCLHlFQUExQixDQUZBLENBQUE7V0FHQSxDQUFDLENBQUMsR0FBRixDQUFNLENBQUEsQ0FBRSxDQUFDLENBQUMsTUFBSixDQUFXLENBQUMsSUFBWixDQUFpQixNQUFqQixDQUFOLEVBQWdDLFNBQUMsSUFBRCxHQUFBO2FBQzlCLFFBQVEsQ0FBQyxNQUFULENBQUEsRUFEOEI7SUFBQSxDQUFoQyxFQUp5QjtFQUFBLENBQTNCLEVBekJBO0FBQUEsQ0FBRixDQUFBLENBQUE7O0FBQUEsQ0FpQ0MsQ0FBQyxFQUFFLENBQUMsTUFBTCxDQUNFO0FBQUEsRUFBQSxZQUFBLEVBQWMsU0FBQSxHQUFBO0FBQ1osV0FBTyxJQUFDLENBQUEsSUFBRCxDQUFNLFNBQUEsR0FBQTtBQUNYLFVBQUEsTUFBQTtBQUFBLE1BQUEsTUFBQSxHQUFTLEtBQVQsQ0FBQTtBQUNBLE1BQUEsSUFBRyxDQUFBLENBQUUsSUFBRixDQUFJLENBQUMsR0FBTCxDQUFTLFFBQVQsQ0FBQSxLQUFzQixNQUF0QixJQUFtQyxDQUFBLENBQUUsSUFBRixDQUFJLENBQUMsR0FBTCxDQUFTLFFBQVQsQ0FBQSxLQUFzQixLQUE1RDtBQUNFLFFBQUEsTUFBQSxHQUFTLENBQUEsQ0FBRSxJQUFGLENBQUksQ0FBQyxnQkFBTCxDQUFBLENBQVQsQ0FERjtPQURBO2FBR0EsQ0FBQSxDQUFFLElBQUYsQ0FBSSxDQUFDLEdBQUwsQ0FBUyxRQUFULEVBQW1CLE1BQW5CLEVBSlc7SUFBQSxDQUFOLENBQVAsQ0FEWTtFQUFBLENBQWQ7QUFBQSxFQU9BLGdCQUFBLEVBQWtCLFNBQUEsR0FBQTtBQUNoQixRQUFBLFlBQUE7QUFBQSxJQUFBLElBQUEsR0FBTyxDQUFBLENBQUUsSUFBRixDQUFJLENBQUMsS0FBTCxDQUFBLENBQVksQ0FBQyxHQUFiLENBQ0w7QUFBQSxNQUFBLFFBQUEsRUFBUyxNQUFUO0FBQUEsTUFDQSxTQUFBLEVBQVUsT0FEVjtLQURLLENBR04sQ0FBQyxRQUhLLENBR0ksQ0FBQSxDQUFFLElBQUYsQ0FBSSxDQUFDLE1BQUwsQ0FBQSxDQUhKLENBQVAsQ0FBQTtBQUFBLElBSUEsTUFBQSxHQUFTLElBQUksQ0FBQyxHQUFMLENBQVMsUUFBVCxDQUpULENBQUE7QUFBQSxJQUtBLElBQUksQ0FBQyxNQUFMLENBQUEsQ0FMQSxDQUFBO0FBTUEsV0FBTyxNQUFQLENBUGdCO0VBQUEsQ0FQbEI7Q0FERixDQWpDQSxDQUFBOzs7O0FDQUEsQ0FBQSxDQUFFLFNBQUEsR0FBQTtBQUNBLEVBQUEsT0FBQSxDQUFRLGlCQUFSLENBQUEsQ0FBQTtTQUNBLE9BQUEsQ0FBUSxlQUFSLEVBRkE7QUFBQSxDQUFGLENBQUEsQ0FBQTs7OztBQ0FBLENBQUEsQ0FBRSxTQUFBLEdBQUE7QUFHQSxFQUFBLENBQUEsQ0FBRSxnQ0FBRixDQUFtQyxDQUFDLEtBQXBDLENBQTBDLFNBQUMsQ0FBRCxHQUFBO0FBQ3hDLFFBQUEsTUFBQTtBQUFBLElBQUEsTUFBQSxHQUFTLENBQUEsQ0FBRSxDQUFDLENBQUMsTUFBSixDQUFXLENBQUMsT0FBWixDQUFvQixNQUFwQixDQUEyQixDQUFDLFFBQTVCLENBQXFDLFNBQXJDLENBQVQsQ0FBQTtBQUNBLElBQUEsSUFBVSxDQUFBLENBQUUsQ0FBQyxDQUFDLE1BQUosQ0FBVyxDQUFDLEVBQVosQ0FBZSxHQUFmLENBQVY7QUFBQSxZQUFBLENBQUE7S0FEQTtBQUFBLElBR0EsQ0FBQSxDQUFFLFNBQUYsQ0FBWSxDQUFDLEdBQWIsQ0FBaUIsTUFBakIsQ0FBd0IsQ0FBQyxHQUF6QixDQUE2QixRQUE3QixFQUF1QyxLQUF2QyxDQUhBLENBQUE7QUFBQSxJQUlBLENBQUEsQ0FBRSxXQUFGLENBQWMsQ0FBQyxHQUFmLENBQW1CLENBQUEsQ0FBRSxDQUFDLENBQUMsTUFBSixDQUFXLENBQUMsT0FBWixDQUFvQixNQUFwQixDQUFuQixDQUErQyxDQUFDLFdBQWhELENBQTRELE1BQTVELENBSkEsQ0FBQTtBQU1BLElBQUEsSUFBRyxNQUFNLENBQUMsSUFBUCxDQUFZLElBQVosQ0FBaUIsQ0FBQyxNQUFsQixLQUE0QixDQUEvQjthQUNFLENBQUMsQ0FBQyxJQUFGLENBQU87QUFBQSxRQUFBLEdBQUEsRUFBSyxNQUFNLENBQUMsSUFBUCxDQUFZLEtBQVosQ0FBTDtPQUFQLENBQStCLENBQUMsSUFBaEMsQ0FBcUMsU0FBQyxJQUFELEdBQUE7QUFDbkMsUUFBQSxNQUFNLENBQUMsSUFBUCxDQUFZLFNBQVosQ0FBc0IsQ0FBQyxNQUF2QixDQUE4QixJQUFJLENBQUMsSUFBbkMsQ0FBQSxDQUFBO0FBQUEsUUFDQSxNQUFNLENBQUMsWUFBUCxDQUFBLENBREEsQ0FBQTtBQUFBLFFBRUEsQ0FBQSxDQUFFLENBQUMsQ0FBQyxNQUFKLENBQVcsQ0FBQyxPQUFaLENBQW9CLE1BQXBCLENBQTJCLENBQUMsV0FBNUIsQ0FBd0MsTUFBeEMsQ0FGQSxDQUFBO2VBR0EsVUFBQSxDQUFXLFNBQUEsR0FBQTtpQkFDVCxDQUFBLENBQUUsTUFBRixDQUFTLENBQUMsUUFBVixDQUFtQixRQUFuQixFQUE2QjtBQUFBLFlBQUUsTUFBQSxFQUFRLENBQUEsQ0FBRSxDQUFDLENBQUMsTUFBSixDQUFXLENBQUMsT0FBWixDQUFvQixNQUFwQixDQUEyQixDQUFDLE1BQTVCLENBQUEsQ0FBb0MsQ0FBQyxHQUFyQyxHQUEyQyxFQUFyRDtBQUFBLFlBQXlELFFBQUEsRUFBVSxHQUFuRTtBQUFBLFlBQXdFLE1BQUEsRUFBUSxlQUFoRjtXQUE3QixFQURTO1FBQUEsQ0FBWCxFQUVFLEdBRkYsRUFKbUM7TUFBQSxDQUFyQyxFQURGO0tBQUEsTUFBQTtBQVNFLE1BQUEsTUFBTSxDQUFDLFlBQVAsQ0FBQSxDQUFBLENBQUE7QUFBQSxNQUNBLENBQUEsQ0FBRSxDQUFDLENBQUMsTUFBSixDQUFXLENBQUMsT0FBWixDQUFvQixNQUFwQixDQUEyQixDQUFDLFdBQTVCLENBQXdDLE1BQXhDLENBREEsQ0FBQTthQUVBLFVBQUEsQ0FBVyxTQUFBLEdBQUE7QUFDVCxRQUFBLE9BQU8sQ0FBQyxHQUFSLENBQVksQ0FBQSxDQUFFLENBQUMsQ0FBQyxNQUFKLENBQVcsQ0FBQyxPQUFaLENBQW9CLE1BQXBCLENBQTJCLENBQUMsTUFBNUIsQ0FBQSxDQUFvQyxDQUFDLEdBQXJDLEdBQTJDLEVBQXZELENBQUEsQ0FBQTtlQUNBLENBQUEsQ0FBRSxNQUFGLENBQVMsQ0FBQyxRQUFWLENBQW1CLFFBQW5CLEVBQTZCO0FBQUEsVUFBRSxNQUFBLEVBQVEsQ0FBQSxDQUFFLENBQUMsQ0FBQyxNQUFKLENBQVcsQ0FBQyxPQUFaLENBQW9CLE1BQXBCLENBQTJCLENBQUMsTUFBNUIsQ0FBQSxDQUFvQyxDQUFDLEdBQXJDLEdBQTJDLEVBQXJEO0FBQUEsVUFBeUQsUUFBQSxFQUFVLEdBQW5FO0FBQUEsVUFBd0UsTUFBQSxFQUFRLGVBQWhGO1NBQTdCLEVBRlM7TUFBQSxDQUFYLEVBR0UsR0FIRixFQVhGO0tBUHdDO0VBQUEsQ0FBMUMsQ0FBQSxDQUFBO1NBeUJBLENBQUEsQ0FBRSxxQkFBRixDQUF3QixDQUFDLEtBQXpCLENBQStCLFNBQUMsQ0FBRCxHQUFBO0FBQzdCLFFBQUEsSUFBQTtBQUFBLElBQUEsQ0FBQyxDQUFDLGNBQUYsQ0FBQSxDQUFBLENBQUE7QUFBQSxJQUNBLElBQUEsR0FBTyxJQURQLENBQUE7V0FFQSxDQUFDLENBQUMsSUFBRixDQUFPO0FBQUEsTUFBQSxHQUFBLEVBQUssQ0FBQSxDQUFFLElBQUYsQ0FBTyxDQUFDLElBQVIsQ0FBYSxNQUFiLENBQUw7S0FBUCxDQUFpQyxDQUFDLElBQWxDLENBQXVDLFNBQUMsSUFBRCxHQUFBO0FBQ3JDLFVBQUEsTUFBQTtBQUFBLE1BQUEsTUFBQSxHQUFTLENBQUEsQ0FBRSxJQUFGLENBQU8sQ0FBQyxPQUFSLENBQWdCLFNBQWhCLENBQVQsQ0FBQTtBQUFBLE1BQ0EsTUFBTSxDQUFDLElBQVAsQ0FBWSxTQUFaLENBQXNCLENBQUMsTUFBdkIsQ0FBOEIsSUFBSSxDQUFDLElBQW5DLENBREEsQ0FBQTtBQUFBLE1BRUEsQ0FBQSxDQUFFLElBQUYsQ0FBTyxDQUFDLE9BQVIsQ0FBZ0IsV0FBaEIsQ0FBNEIsQ0FBQyxNQUE3QixDQUFBLENBRkEsQ0FBQTthQUdBLE1BQU0sQ0FBQyxHQUFQLENBQVcsUUFBWCxFQUFxQixNQUFNLENBQUMsZ0JBQVAsQ0FBQSxDQUFyQixFQUpxQztJQUFBLENBQXZDLEVBSDZCO0VBQUEsQ0FBL0IsRUE1QkE7QUFBQSxDQUFGLENBQUEsQ0FBQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpfXZhciBmPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChmLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGYsZi5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIkIC0+XG4gICMgQ291cnNlIHNvcnRpbmdcbiAgY291cnNlTGlzdCA9IG5ldyBMaXN0KCdjb3Vyc2VzJywge3ZhbHVlTmFtZXM6IFsndGl0bGUnLCdjaGFyYWN0ZXJzJywndmlld3MnLCdzdHVkZW50cyddfSlcblxuICAjIFVzZXIgc29ydGluZ1xuICB1c2VyTGlzdCA9IG5ldyBMaXN0KCd1c2VycycsIHt2YWx1ZU5hbWVzOiBbJ25hbWUnLCd0cmFpbmluZycsJ2NoYXJhY3RlcnMtbXMnLCAnY2hhcmFjdGVycy11cycsICdlZGl0cyddfSlcblxuICAjIEFydGljbGUgc29ydGluZ1xuICBhcnRpY2xlTGlzdCA9IG5ldyBMaXN0KCdhcnRpY2xlcycsIHt2YWx1ZU5hbWVzOiBbJ3JhdGluZ19udW0nLCAndGl0bGUnLCdjaGFyYWN0ZXJzJywndmlld3MnXX0pXG5cbiAgIyBSZXZpc2lvbiBzb3J0aW5nXG4gIHJldmlzaW9uTGlzdCA9IG5ldyBMaXN0KCdyZXZpc2lvbnMnLCB7dmFsdWVOYW1lczogWyd0aXRsZScsICdkYXRlJywgJ2NoYXJhY3RlcnMnLCAndmlld3MnXX0pXG5cbiAgJCgnc2VsZWN0LmNvaG9ydHMnKS5jaGFuZ2UgKGUpIC0+XG4gICAgY29ob3J0ID0gJCgnc2VsZWN0LmNvaG9ydHMgb3B0aW9uOnNlbGVjdGVkJykudmFsKClcbiAgICB3aW5kb3cubG9jYXRpb24gPSBcIi9jb3Vyc2VzP2NvaG9ydD1cIiArIGVuY29kZVVSSUNvbXBvbmVudChjb2hvcnQpXG5cbiAgJCgnc2VsZWN0LnNvcnRzJykuY2hhbmdlIChlKSAtPlxuICAgIGxpc3QgPSBzd2l0Y2goJCh0aGlzKS5hdHRyKCdyZWwnKSlcbiAgICAgIHdoZW4gXCJjb3Vyc2VzXCIgdGhlbiBjb3Vyc2VMaXN0XG4gICAgICB3aGVuIFwidXNlcnNcIiB0aGVuIHVzZXJMaXN0XG4gICAgICB3aGVuIFwiYXJ0aWNsZXNcIiB0aGVuIGFydGljbGVMaXN0XG4gICAgICB3aGVuIFwicmV2aXNpb25zXCIgdGhlbiByZXZpc2lvbkxpc3RcbiAgICBsaXN0LnNvcnQoJCh0aGlzKS52YWwoKSwgeyBvcmRlcjogJCh0aGlzKS5jaGlsZHJlbignb3B0aW9uOnNlbGVjdGVkJykuYXR0cigncmVsJykgfSlcblxuICAkKCdhLm1hbnVhbF91cGRhdGUnKS5jbGljayAoZSkgLT5cbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zb2xlLmxvZyAnVXBkYXRpbmcgY291cnNlLi4uJ1xuICAgICQoZS50YXJnZXQpLnBhcmVudCgpLnRleHQoJ1VwZGF0aW5nIGNvdXJzZSBkYXRhLiBUaGlzIHBhZ2Ugd2lsbCByZWxvYWQgd2hlbiBuZXcgZGF0YSBpcyBhdmFpbGFibGUuJylcbiAgICAkLmdldCgkKGUudGFyZ2V0KS5hdHRyKCdocmVmJyksIChkYXRhKSAtPlxuICAgICAgbG9jYXRpb24ucmVsb2FkKClcbiAgICApXG5cbiQuZm4uZXh0ZW5kXG4gIHRvZ2dsZUhlaWdodDogLT5cbiAgICByZXR1cm4gQGVhY2ggLT5cbiAgICAgIGhlaWdodCA9ICcwcHgnXG4gICAgICBpZiAkKEApLmNzcygnaGVpZ2h0JykgPT0gdW5kZWZpbmVkIHx8ICQoQCkuY3NzKCdoZWlnaHQnKSA9PSAnMHB4J1xuICAgICAgICBoZWlnaHQgPSAkKEApLmdldENvbnRlbnRIZWlnaHQoKVxuICAgICAgJChAKS5jc3MoJ2hlaWdodCcsIGhlaWdodClcblxuICBnZXRDb250ZW50SGVpZ2h0OiAtPlxuICAgIGVsZW0gPSAkKEApLmNsb25lKCkuY3NzKFxuICAgICAgXCJoZWlnaHRcIjpcImF1dG9cIlxuICAgICAgXCJkaXNwbGF5XCI6XCJibG9ja1wiXG4gICAgKS5hcHBlbmRUbygkKEApLnBhcmVudCgpKVxuICAgIGhlaWdodCA9IGVsZW0uY3NzKFwiaGVpZ2h0XCIpXG4gICAgZWxlbS5yZW1vdmUoKVxuICAgIHJldHVybiBoZWlnaHQiLCIkIC0+XG4gIHJlcXVpcmUoXCIuL2NvdXJzZS5jb2ZmZWVcIilcbiAgcmVxdWlyZShcIi4vdXNlci5jb2ZmZWVcIikiLCIkIC0+XG5cbiAgIyBJbml0aWFsIHNob3dpbmcgb2YgdGhlIGRyYXdlclxuICAkKCcuZHJhd2VyX3RyaWdnZXI6bm90KC5kaXNhYmxlZCknKS5jbGljayAoZSkgLT5cbiAgICBkcmF3ZXIgPSAkKGUudGFyZ2V0KS5wYXJlbnRzKCcucm93JykuY2hpbGRyZW4oJy5kcmF3ZXInKVxuICAgIHJldHVybiBpZiAkKGUudGFyZ2V0KS5pcygnYScpXG5cbiAgICAkKCcuZHJhd2VyJykubm90KGRyYXdlcikuY3NzKCdoZWlnaHQnLCAnMHB4JylcbiAgICAkKCcucm93Lm9wZW4nKS5ub3QoJChlLnRhcmdldCkucGFyZW50cygnLnJvdycpKS5yZW1vdmVDbGFzcygnb3BlbicpXG5cbiAgICBpZihkcmF3ZXIuZmluZCgnbGknKS5sZW5ndGggPT0gMClcbiAgICAgICQuYWpheCh1cmw6IGRyYXdlci5hdHRyKFwicmVsXCIpKS5kb25lIChkYXRhKSAtPlxuICAgICAgICBkcmF3ZXIuZmluZCgndWwubGlzdCcpLmFwcGVuZChkYXRhLmh0bWwpXG4gICAgICAgIGRyYXdlci50b2dnbGVIZWlnaHQoKVxuICAgICAgICAkKGUudGFyZ2V0KS5wYXJlbnRzKCcucm93JykudG9nZ2xlQ2xhc3MoJ29wZW4nKVxuICAgICAgICBzZXRUaW1lb3V0IC0+XG4gICAgICAgICAgJCgnaHRtbCcpLnZlbG9jaXR5IFwic2Nyb2xsXCIsIHsgb2Zmc2V0OiAkKGUudGFyZ2V0KS5wYXJlbnRzKCcucm93Jykub2Zmc2V0KCkudG9wIC0gODAsIGR1cmF0aW9uOiA0MDAsIGVhc2luZzogXCJlYXNlSW5PdXRRdWFkXCIgfVxuICAgICAgICAsIDIwMFxuICAgIGVsc2VcbiAgICAgIGRyYXdlci50b2dnbGVIZWlnaHQoKVxuICAgICAgJChlLnRhcmdldCkucGFyZW50cygnLnJvdycpLnRvZ2dsZUNsYXNzKCdvcGVuJylcbiAgICAgIHNldFRpbWVvdXQgLT5cbiAgICAgICAgY29uc29sZS5sb2cgJChlLnRhcmdldCkucGFyZW50cygnLnJvdycpLm9mZnNldCgpLnRvcCAtIDgwXG4gICAgICAgICQoJ2h0bWwnKS52ZWxvY2l0eSBcInNjcm9sbFwiLCB7IG9mZnNldDogJChlLnRhcmdldCkucGFyZW50cygnLnJvdycpLm9mZnNldCgpLnRvcCAtIDgwLCBkdXJhdGlvbjogNDAwLCBlYXNpbmc6IFwiZWFzZUluT3V0UXVhZFwiIH1cbiAgICAgICwgMjAwXG5cblxuICAjIENsaWNraW5nIHRoZSBcInNob3cgbW9yZSBjb250cmlidXRpb25zXCIgbGlua1xuICAkKCcuZHJhd2VyIC52aWV3LWFsbCBhJykuY2xpY2sgKGUpIC0+XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgdGhhdCA9IHRoaXNcbiAgICAkLmFqYXgodXJsOiAkKHRoaXMpLmF0dHIoXCJocmVmXCIpKS5kb25lIChkYXRhKSAtPlxuICAgICAgZHJhd2VyID0gJCh0aGF0KS5wYXJlbnRzKCcuZHJhd2VyJylcbiAgICAgIGRyYXdlci5maW5kKCd1bC5saXN0JykuYXBwZW5kKGRhdGEuaHRtbClcbiAgICAgICQodGhhdCkucGFyZW50cygnLnZpZXctYWxsJykucmVtb3ZlKClcbiAgICAgIGRyYXdlci5jc3MoJ2hlaWdodCcsIGRyYXdlci5nZXRDb250ZW50SGVpZ2h0KCkpIl19
