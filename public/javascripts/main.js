(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
$(function() {
  var articleList, courseList, revisionList, userCourseList, userList;
  userCourseList = new List('user_courses', {
    valueNames: ['utitle', 'ucharacters', 'uviews', 'ustudents']
  });
  courseList = new List('courses', {
    valueNames: ['title', 'characters', 'views', 'students']
  });
  userList = new List('users', {
    valueNames: ['name', 'training', 'characters-ms', 'characters-us', 'edits']
  });
  articleList = new List('articles', {
    valueNames: ['rating_num', 'title', 'characters', 'views']
  });
  revisionList = new List('revisions', {
    valueNames: ['title', 'date', 'characters', 'views']
  });
  $('select.cohorts').change(function(e) {
    var cohort;
    cohort = $('select.cohorts option:selected').val();
    return window.location = "/courses?cohort=" + encodeURIComponent(cohort);
  });
  $('select.sorts').change(function(e) {
    var list;
    list = (function() {
      switch ($(this).attr('rel')) {
        case "courses":
          return courseList;
        case "users":
          return userList;
        case "articles":
          return articleList;
        case "revisions":
          return revisionList;
      }
    }).call(this);
    return list.sort($(this).val(), {
      order: $(this).children('option:selected').attr('rel')
    });
  });
  $('a.manual_update').click(function(e) {
    e.preventDefault();
    console.log('Updating course...');
    $(e.target).parent().text('Updating course data. This page will reload when new data is available.');
    return $.get($(e.target).attr('href'), function(data) {
      return location.reload();
    });
  });
  return $('.notify_untrained').click(function(e) {
    e.preventDefault();
    if (confirm("This will post a reminder on the talk pages for all students who have not completed training. Are you sure you want to do this?")) {
      $(e.target).addClass('loading');
      return $.get($(e.target).attr('href'), (function(_this) {
        return function(data) {
          $(e.target).removeClass('loading');
          return alert("Untrained users have been reminded to complete the training.");
        };
      })(this));
    }
  });
});

$.fn.extend({
  toggleHeight: function() {
    return this.each(function() {
      var height;
      height = '0px';
      if ($(this).css('height') === void 0 || $(this).css('height') === '0px') {
        height = $(this).getContentHeight();
      }
      return $(this).css('height', height);
    });
  },
  getContentHeight: function() {
    var elem, height;
    elem = $(this).clone().css({
      "height": "auto",
      "display": "block"
    }).appendTo($(this).parent());
    height = elem.css("height");
    elem.remove();
    return height;
  }
});


},{}],2:[function(require,module,exports){
$(function() {
  require("./course.coffee");
  return require("./user.coffee");
});


},{"./course.coffee":1,"./user.coffee":3}],3:[function(require,module,exports){
$(function() {
  $('.drawer_trigger:not(.disabled)').click(function(e) {
    var drawer;
    drawer = $(e.target).parents('.row').children('.drawer');
    if ($(e.target).is('a')) {
      return;
    }
    $('.drawer').not(drawer).css('height', '0px');
    $('.row.open').not($(e.target).parents('.row')).removeClass('open');
    if (drawer.find('li').length === 0) {
      return $.ajax({
        url: drawer.attr("rel")
      }).done(function(data) {
        drawer.find('ul.list').append(data.html);
        drawer.toggleHeight();
        $(e.target).parents('.row').toggleClass('open');
        return setTimeout(function() {
          return $('html').velocity("scroll", {
            offset: $(e.target).parents('.row').offset().top - 80,
            duration: 400,
            easing: "easeInOutQuad"
          });
        }, 200);
      });
    } else {
      drawer.toggleHeight();
      $(e.target).parents('.row').toggleClass('open');
      return setTimeout(function() {
        console.log($(e.target).parents('.row').offset().top - 80);
        return $('html').velocity("scroll", {
          offset: $(e.target).parents('.row').offset().top - 80,
          duration: 400,
          easing: "easeInOutQuad"
        });
      }, 200);
    }
  });
  return $('.drawer .view-all a').click(function(e) {
    var that;
    e.preventDefault();
    that = this;
    return $.ajax({
      url: $(this).attr("href")
    }).done(function(data) {
      var drawer;
      drawer = $(that).parents('.drawer');
      drawer.find('ul.list').append(data.html);
      $(that).parents('.view-all').remove();
      return drawer.css('height', drawer.getContentHeight());
    });
  });
});


},{}]},{},[2])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9uYXRlYmFpbGV5L0RldmVsb3BtZW50L1dpa2lFZHVEYXNoYm9hcmQvbm9kZV9tb2R1bGVzL2d1bHAtYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwiL1VzZXJzL25hdGViYWlsZXkvRGV2ZWxvcG1lbnQvV2lraUVkdURhc2hib2FyZC9hcHAvYXNzZXRzL2phdmFzY3JpcHRzL2NvdXJzZS5jb2ZmZWUiLCIvVXNlcnMvbmF0ZWJhaWxleS9EZXZlbG9wbWVudC9XaWtpRWR1RGFzaGJvYXJkL2FwcC9hc3NldHMvamF2YXNjcmlwdHMvbWFpbi5jb2ZmZWUiLCIvVXNlcnMvbmF0ZWJhaWxleS9EZXZlbG9wbWVudC9XaWtpRWR1RGFzaGJvYXJkL2FwcC9hc3NldHMvamF2YXNjcmlwdHMvdXNlci5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQSxDQUFBLENBQUUsU0FBQSxHQUFBO0FBRUEsTUFBQSwrREFBQTtBQUFBLEVBQUEsY0FBQSxHQUFxQixJQUFBLElBQUEsQ0FBSyxjQUFMLEVBQXFCO0FBQUEsSUFBQyxVQUFBLEVBQVksQ0FBQyxRQUFELEVBQVUsYUFBVixFQUF3QixRQUF4QixFQUFpQyxXQUFqQyxDQUFiO0dBQXJCLENBQXJCLENBQUE7QUFBQSxFQUNBLFVBQUEsR0FBaUIsSUFBQSxJQUFBLENBQUssU0FBTCxFQUFnQjtBQUFBLElBQUMsVUFBQSxFQUFZLENBQUMsT0FBRCxFQUFTLFlBQVQsRUFBc0IsT0FBdEIsRUFBOEIsVUFBOUIsQ0FBYjtHQUFoQixDQURqQixDQUFBO0FBQUEsRUFJQSxRQUFBLEdBQWUsSUFBQSxJQUFBLENBQUssT0FBTCxFQUFjO0FBQUEsSUFBQyxVQUFBLEVBQVksQ0FBQyxNQUFELEVBQVEsVUFBUixFQUFtQixlQUFuQixFQUFvQyxlQUFwQyxFQUFxRCxPQUFyRCxDQUFiO0dBQWQsQ0FKZixDQUFBO0FBQUEs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RixDQUFBLENBQUEiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKX12YXIgZj1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwoZi5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxmLGYuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiJCAtPlxuICAjIENvdXJzZSBzb3J0aW5nXG4gIHVzZXJDb3Vyc2VMaXN0ID0gbmV3IExpc3QoJ3VzZXJfY291cnNlcycsIHt2YWx1ZU5hbWVzOiBbJ3V0aXRsZScsJ3VjaGFyYWN0ZXJzJywndXZpZXdzJywndXN0dWRlbnRzJ119KVxuICBjb3Vyc2VMaXN0ID0gbmV3IExpc3QoJ2NvdXJzZXMnLCB7dmFsdWVOYW1lczogWyd0aXRsZScsJ2NoYXJhY3RlcnMnLCd2aWV3cycsJ3N0dWRlbnRzJ119KVxuXG4gICMgVXNlciBzb3J0aW5nXG4gIHVzZXJMaXN0ID0gbmV3IExpc3QoJ3VzZXJzJywge3ZhbHVlTmFtZXM6IFsnbmFtZScsJ3RyYWluaW5nJywnY2hhcmFjdGVycy1tcycsICdjaGFyYWN0ZXJzLXVzJywgJ2VkaXRzJ119KVxuXG4gICMgQXJ0aWNsZSBzb3J0aW5nXG4gIGFydGljbGVMaXN0ID0gbmV3IExpc3QoJ2FydGljbGVzJywge3ZhbHVlTmFtZXM6IFsncmF0aW5nX251bScsICd0aXRsZScsJ2NoYXJhY3RlcnMnLCd2aWV3cyddfSlcblxuICAjIFJldmlzaW9uIHNvcnRpbmdcbiAgcmV2aXNpb25MaXN0ID0gbmV3IExpc3QoJ3JldmlzaW9ucycsIHt2YWx1ZU5hbWVzOiBbJ3RpdGxlJywgJ2RhdGUnLCAnY2hhcmFjdGVycycsICd2aWV3cyddfSlcblxuICAkKCdzZWxlY3QuY29ob3J0cycpLmNoYW5nZSAoZSkgLT5cbiAgICBjb2hvcnQgPSAkKCdzZWxlY3QuY29ob3J0cyBvcHRpb246c2VsZWN0ZWQnKS52YWwoKVxuICAgIHdpbmRvdy5sb2NhdGlvbiA9IFwiL2NvdXJzZXM/Y29ob3J0PVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KGNvaG9ydClcblxuICAkKCdzZWxlY3Quc29ydHMnKS5jaGFuZ2UgKGUpIC0+XG4gICAgbGlzdCA9IHN3aXRjaCgkKHRoaXMpLmF0dHIoJ3JlbCcpKVxuICAgICAgd2hlbiBcImNvdXJzZXNcIiB0aGVuIGNvdXJzZUxpc3RcbiAgICAgIHdoZW4gXCJ1c2Vyc1wiIHRoZW4gdXNlckxpc3RcbiAgICAgIHdoZW4gXCJhcnRpY2xlc1wiIHRoZW4gYXJ0aWNsZUxpc3RcbiAgICAgIHdoZW4gXCJyZXZpc2lvbnNcIiB0aGVuIHJldmlzaW9uTGlzdFxuICAgIGxpc3Quc29ydCgkKHRoaXMpLnZhbCgpLCB7IG9yZGVyOiAkKHRoaXMpLmNoaWxkcmVuKCdvcHRpb246c2VsZWN0ZWQnKS5hdHRyKCdyZWwnKSB9KVxuXG4gICQoJ2EubWFudWFsX3VwZGF0ZScpLmNsaWNrIChlKSAtPlxuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnNvbGUubG9nICdVcGRhdGluZyBjb3Vyc2UuLi4nXG4gICAgJChlLnRhcmdldCkucGFyZW50KCkudGV4dCgnVXBkYXRpbmcgY291cnNlIGRhdGEuIFRoaXMgcGFnZSB3aWxsIHJlbG9hZCB3aGVuIG5ldyBkYXRhIGlzIGF2YWlsYWJsZS4nKVxuICAgICQuZ2V0KCQoZS50YXJnZXQpLmF0dHIoJ2hyZWYnKSwgKGRhdGEpIC0+XG4gICAgICBsb2NhdGlvbi5yZWxvYWQoKVxuICAgIClcblxuICAkKCcubm90aWZ5X3VudHJhaW5lZCcpLmNsaWNrIChlKSAtPlxuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIGlmIGNvbmZpcm0gXCJUaGlzIHdpbGwgcG9zdCBhIHJlbWluZGVyIG9uIHRoZSB0YWxrIHBhZ2VzIGZvciBhbGwgc3R1ZGVudHMgd2hvIGhhdmUgbm90IGNvbXBsZXRlZCB0cmFpbmluZy4gQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRvIHRoaXM/XCJcbiAgICAgICQoZS50YXJnZXQpLmFkZENsYXNzKCdsb2FkaW5nJylcbiAgICAgICQuZ2V0KCQoZS50YXJnZXQpLmF0dHIoJ2hyZWYnKSwgKGRhdGEpID0+XG4gICAgICAgICQoZS50YXJnZXQpLnJlbW92ZUNsYXNzKCdsb2FkaW5nJylcbiAgICAgICAgYWxlcnQoXCJVbnRyYWluZWQgdXNlcnMgaGF2ZSBiZWVuIHJlbWluZGVkIHRvIGNvbXBsZXRlIHRoZSB0cmFpbmluZy5cIilcbiAgICAgIClcblxuJC5mbi5leHRlbmRcbiAgdG9nZ2xlSGVpZ2h0OiAtPlxuICAgIHJldHVybiBAZWFjaCAtPlxuICAgICAgaGVpZ2h0ID0gJzBweCdcbiAgICAgIGlmICQoQCkuY3NzKCdoZWlnaHQnKSA9PSB1bmRlZmluZWQgfHwgJChAKS5jc3MoJ2hlaWdodCcpID09ICcwcHgnXG4gICAgICAgIGhlaWdodCA9ICQoQCkuZ2V0Q29udGVudEhlaWdodCgpXG4gICAgICAkKEApLmNzcygnaGVpZ2h0JywgaGVpZ2h0KVxuXG4gIGdldENvbnRlbnRIZWlnaHQ6IC0+XG4gICAgZWxlbSA9ICQoQCkuY2xvbmUoKS5jc3MoXG4gICAgICBcImhlaWdodFwiOlwiYXV0b1wiXG4gICAgICBcImRpc3BsYXlcIjpcImJsb2NrXCJcbiAgICApLmFwcGVuZFRvKCQoQCkucGFyZW50KCkpXG4gICAgaGVpZ2h0ID0gZWxlbS5jc3MoXCJoZWlnaHRcIilcbiAgICBlbGVtLnJlbW92ZSgpXG4gICAgcmV0dXJuIGhlaWdodCIsIiQgLT5cbiAgcmVxdWlyZShcIi4vY291cnNlLmNvZmZlZVwiKVxuICByZXF1aXJlKFwiLi91c2VyLmNvZmZlZVwiKSIsIiQgLT5cblxuICAjIEluaXRpYWwgc2hvd2luZyBvZiB0aGUgZHJhd2VyXG4gICQoJy5kcmF3ZXJfdHJpZ2dlcjpub3QoLmRpc2FibGVkKScpLmNsaWNrIChlKSAtPlxuICAgIGRyYXdlciA9ICQoZS50YXJnZXQpLnBhcmVudHMoJy5yb3cnKS5jaGlsZHJlbignLmRyYXdlcicpXG4gICAgcmV0dXJuIGlmICQoZS50YXJnZXQpLmlzKCdhJylcblxuICAgICQoJy5kcmF3ZXInKS5ub3QoZHJhd2VyKS5jc3MoJ2hlaWdodCcsICcwcHgnKVxuICAgICQoJy5yb3cub3BlbicpLm5vdCgkKGUudGFyZ2V0KS5wYXJlbnRzKCcucm93JykpLnJlbW92ZUNsYXNzKCdvcGVuJylcblxuICAgIGlmKGRyYXdlci5maW5kKCdsaScpLmxlbmd0aCA9PSAwKVxuICAgICAgJC5hamF4KHVybDogZHJhd2VyLmF0dHIoXCJyZWxcIikpLmRvbmUgKGRhdGEpIC0+XG4gICAgICAgIGRyYXdlci5maW5kKCd1bC5saXN0JykuYXBwZW5kKGRhdGEuaHRtbClcbiAgICAgICAgZHJhd2VyLnRvZ2dsZUhlaWdodCgpXG4gICAgICAgICQoZS50YXJnZXQpLnBhcmVudHMoJy5yb3cnKS50b2dnbGVDbGFzcygnb3BlbicpXG4gICAgICAgIHNldFRpbWVvdXQgLT5cbiAgICAgICAgICAkKCdodG1sJykudmVsb2NpdHkgXCJzY3JvbGxcIiwgeyBvZmZzZXQ6ICQoZS50YXJnZXQpLnBhcmVudHMoJy5yb3cnKS5vZmZzZXQoKS50b3AgLSA4MCwgZHVyYXRpb246IDQwMCwgZWFzaW5nOiBcImVhc2VJbk91dFF1YWRcIiB9XG4gICAgICAgICwgMjAwXG4gICAgZWxzZVxuICAgICAgZHJhd2VyLnRvZ2dsZUhlaWdodCgpXG4gICAgICAkKGUudGFyZ2V0KS5wYXJlbnRzKCcucm93JykudG9nZ2xlQ2xhc3MoJ29wZW4nKVxuICAgICAgc2V0VGltZW91dCAtPlxuICAgICAgICBjb25zb2xlLmxvZyAkKGUudGFyZ2V0KS5wYXJlbnRzKCcucm93Jykub2Zmc2V0KCkudG9wIC0gODBcbiAgICAgICAgJCgnaHRtbCcpLnZlbG9jaXR5IFwic2Nyb2xsXCIsIHsgb2Zmc2V0OiAkKGUudGFyZ2V0KS5wYXJlbnRzKCcucm93Jykub2Zmc2V0KCkudG9wIC0gODAsIGR1cmF0aW9uOiA0MDAsIGVhc2luZzogXCJlYXNlSW5PdXRRdWFkXCIgfVxuICAgICAgLCAyMDBcblxuXG4gICMgQ2xpY2tpbmcgdGhlIFwic2hvdyBtb3JlIGNvbnRyaWJ1dGlvbnNcIiBsaW5rXG4gICQoJy5kcmF3ZXIgLnZpZXctYWxsIGEnKS5jbGljayAoZSkgLT5cbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICB0aGF0ID0gdGhpc1xuICAgICQuYWpheCh1cmw6ICQodGhpcykuYXR0cihcImhyZWZcIikpLmRvbmUgKGRhdGEpIC0+XG4gICAgICBkcmF3ZXIgPSAkKHRoYXQpLnBhcmVudHMoJy5kcmF3ZXInKVxuICAgICAgZHJhd2VyLmZpbmQoJ3VsLmxpc3QnKS5hcHBlbmQoZGF0YS5odG1sKVxuICAgICAgJCh0aGF0KS5wYXJlbnRzKCcudmlldy1hbGwnKS5yZW1vdmUoKVxuICAgICAgZHJhd2VyLmNzcygnaGVpZ2h0JywgZHJhd2VyLmdldENvbnRlbnRIZWlnaHQoKSkiXX0=
